# QA — Troubleshooting RHACM (fasi e modelli)

Domande e risposte avanzate relative a chapter2/2.7-troubleshooting.md

1) Domanda
Qual è un metodo sistematico per diagnosticare un managed cluster che non si registra correttamente sul Hub?  
Risposta  
Verificare in ordine: network bidirezionale (6443/443), DNS, trust CA (certs), tempo (NTP), pull-secret per immagini e log del klusterlet. Usare test di connessione dial-in/out e controllare managedcluster-import-controller logs; isolare variabili e reimportare se necessario.

2) Domanda
Come identificare e risolvere problemi causati da pull-secret mancanti su cluster disconnected?  
Risposta  
Controllare eventi dei pod klusterlet/install, verificare che il mirror registry sia raggiungibile e che pull-secret sia presente nei namespace richiesti; testare docker pull manuale dalle nodes; aggiornare secret in GitOps e ri-deploy.

3) Domanda
In presenza di time-drift tra hub e managed cluster quali sintomi si osservano e come risolverli senza downtime?  
Risposta  
Sintomi: token expirations, lease scadute, riconnessioni intermittenti. Soluzione: sincronizzare NTP/chrony, riavviare agenti se necessario, rinnovare certificati se scaduti e monitorare con metriche di lease.

4) Domanda
Quali strumenti/log sono più utili per debug dei controller (import controller, klusterlet)?  
Risposta  
Oc logs dei pod (managedcluster-import-controller-v2, klusterlet), describe delle CR (ManagedCluster, klusterlet CR), eventi namespaces multicluster-engine, e metriche/alert su operator health; usare kubectl oc adm inspect per raccolta diagnostica.

5) Domanda
Come evitare regressioni di operational drift che causano problemi ricorrenti di import/registration?  
Risposta  
Adottare GitOps per manifest di bootstrap, policy di test pre-deploy, cron job di verifica integrità, alerting proattivo su state drift e playbook per remediation automatica o semi-automatica.